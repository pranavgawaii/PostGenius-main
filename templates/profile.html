{% load static %}
<!DOCTYPE html>
<html>
<head>
  <title>My Profile - Post Genius</title>
  <link rel="stylesheet" href="{% static 'style.css' %}">
  <script
    async
    crossorigin="anonymous"
    data-clerk-publishable-key="{{ clerk_publishable_key }}"
    src="https://cdn.jsdelivr.net/npm/@clerk/clerk-js@latest/dist/clerk.browser.js"
    type="text/javascript"
  ></script>
  <style>
    .profile-container {
        max-width: 800px;
        margin: 40px auto;
        padding: 20px;
        display: flex;
        justify-content: center;
    }
  </style>
</head>
<body>
  {% include 'nav.html' %}

  <div class="profile-container">
    <div id="user-profile"></div>
  </div>

  <script>
    window.addEventListener("load", async function () {
      await Clerk.load();
      if (Clerk.user) {
        const userProfileDiv = document.getElementById("user-profile");
        Clerk.mountUserProfile(userProfileDiv, {
            appearance: {
                baseTheme: document.documentElement.getAttribute('data-theme') === 'light' ? undefined : 'dark'
            }
        });
      } else {
        window.location.href = "{% url 'signin' %}";
      }
    });
  </script>
  <script src="{% static 'script.js' %}"></script>
</body>
</html>
